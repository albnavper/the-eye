{
    "sites": [
        {
            "id": "dos-hermanas-bomberos",
            "name": "Dos Hermanas Bomberos",
            "url": "https://www.doshermanas.es/concejalias/relaciones-humanas/oposiciones/15-PLAZAS-DE-BOMBERO-A-CONDUCTOR-A-TURNO-LIBRE-MEDIANTE-CONCURSO-OPOSICION/",
            "enabled": true,
            "steps": [],
            "extraction": {
                "listSelector": ".galleries a[href*='.pdf']",
                "fields": {
                    "title": {
                        "selector": ".",
                        "attribute": null
                    },
                    "url": {
                        "selector": ".",
                        "attribute": "href"
                    }
                },
                "deepSearch": {
                    "enabled": false,
                    "selector": "",
                    "attribute": "href"
                }
            },
            "timeout": 30000,
            "retries": 2
        },
        {
            "id": "cbpc-tablon",
            "name": "CBPC Tablón de Anuncios",
            "url": "https://sede.cbpc.es/opencms/opencms/sede",
            "enabled": true,
            "steps": [
                {
                    "action": "evaluate",
                    "script": "const link = document.querySelector(\"a[title='Tablón de anuncios']\"); if(link) { link.removeAttribute('target'); link.click(); }"
                },
                {
                    "action": "wait",
                    "value": 3000
                },
                {
                    "action": "wait_ajax"
                },
                {
                    "action": "wait",
                    "value": 5000
                }
            ],
            "extraction": {
                "listSelector": "a[title='Ver']",
                "fields": {
                    "title": {
                        "selector": ".",
                        "attribute": "title"
                    },
                    "url": {
                        "selector": ".",
                        "attribute": "href"
                    }
                },
                "deepSearch": {
                    "enabled": true,
                    "selector": "a[title='Descargar']",
                    "attribute": "href"
                }
            },
            "timeout": 30000,
            "retries": 2
        },
        {
            "id": "dipusevilla-bomberos",
            "name": "Diputación Sevilla - Bomberos '19",
            "url": "https://sedeelectronicadipusevilla.es/opencms/opencms/sede",
            "enabled": true,
            "steps": [
                {
                    "action": "wait",
                    "value": 3000
                },
                {
                    "action": "evaluate",
                    "script": "const cb = document.querySelector('#checkAviso'); if(cb) cb.click();"
                },
                {
                    "action": "wait",
                    "value": 500
                },
                {
                    "action": "evaluate",
                    "script": "const btn = document.querySelector('a.cerrar'); if(btn) btn.click();"
                },
                {
                    "action": "wait",
                    "value": 1000
                },
                {
                    "action": "click",
                    "selector": "#search-box"
                },
                {
                    "action": "type",
                    "selector": "#search-box",
                    "value": "bombero"
                },
                {
                    "action": "press",
                    "key": "Enter"
                },
                {
                    "action": "wait_ajax"
                },
                {
                    "action": "wait",
                    "value": 3000
                },
                {
                    "action": "evaluate",
                    "script": "const links = document.querySelectorAll('a'); for(let a of links) { if(a.textContent.includes('BOMBERO') && a.textContent.includes('19')) { a.click(); break; } }"
                },
                {
                    "action": "wait_ajax"
                },
                {
                    "action": "wait",
                    "value": 3000
                }
            ],
            "extraction": {
                "listSelector": "div.tramites a[href*='.pdf']",
                "fields": {
                    "title": {
                        "selector": ".",
                        "attribute": null
                    },
                    "url": {
                        "selector": ".",
                        "attribute": "href"
                    }
                },
                "deepSearch": {
                    "enabled": false,
                    "selector": "",
                    "attribute": "href"
                }
            },
            "timeout": 45000,
            "retries": 2
        },
        {
            "id": "dipusevilla-bomberos-2020",
            "name": "Diputación Sevilla - Bomberos 2020/2021",
            "url": "https://sedeelectronicadipusevilla.es/opencms/opencms/sede",
            "enabled": true,
            "steps": [
                {
                    "action": "wait",
                    "value": 3000
                },
                {
                    "action": "evaluate",
                    "script": "const cb = document.querySelector('#checkAviso'); if(cb) cb.click();"
                },
                {
                    "action": "wait",
                    "value": 500
                },
                {
                    "action": "evaluate",
                    "script": "const btn = document.querySelector('a.cerrar'); if(btn) btn.click();"
                },
                {
                    "action": "wait",
                    "value": 1000
                },
                {
                    "action": "click",
                    "selector": "#search-box"
                },
                {
                    "action": "type",
                    "selector": "#search-box",
                    "value": "bombero"
                },
                {
                    "action": "press",
                    "key": "Enter"
                },
                {
                    "action": "wait_ajax"
                },
                {
                    "action": "wait",
                    "value": 3000
                },
                {
                    "action": "evaluate",
                    "script": "const links = document.querySelectorAll('a'); for(let a of links) { if(a.textContent.includes('BOMBERO') && a.textContent.includes('2020') && a.textContent.includes('2021')) { a.click(); break; } }"
                },
                {
                    "action": "wait_ajax"
                },
                {
                    "action": "wait",
                    "value": 3000
                }
            ],
            "extraction": {
                "listSelector": "div.tramites a[href*='.pdf']",
                "fields": {
                    "title": {
                        "selector": ".",
                        "attribute": null
                    },
                    "url": {
                        "selector": ".",
                        "attribute": "href"
                    }
                },
                "deepSearch": {
                    "enabled": false,
                    "selector": "",
                    "attribute": "href"
                }
            },
            "timeout": 45000,
            "retries": 2
        },
        {
            "id": "moron-bomberos",
            "name": "Morón de la Frontera - Bomberos",
            "url": "https://morondelafrontera.sedelectronica.es/board",
            "enabled": true,
            "steps": [
                {
                    "action": "wait",
                    "value": 2000
                },
                {
                    "action": "fill",
                    "selector": "input.field.c-field__input",
                    "value": "bombero"
                },
                {
                    "action": "click",
                    "selector": "button.c-button.c-button-b"
                },
                {
                    "action": "wait_ajax"
                },
                {
                    "action": "wait",
                    "value": 2000
                }
            ],
            "extraction": {
                "listSelector": "a.gIconLink",
                "fields": {
                    "title": {
                        "selector": ".",
                        "attribute": "title"
                    },
                    "url": {
                        "selector": ".",
                        "attribute": "href"
                    }
                },
                "deepSearch": {
                    "enabled": false,
                    "selector": "",
                    "attribute": "href"
                }
            },
            "timeout": 30000,
            "retries": 2
        }
    ],
    "telegram": {
        "botToken": "${TELEGRAM_BOT_TOKEN}",
        "chatId": "${TELEGRAM_CHAT_ID}"
    },
    "defaults": {
        "timeout": 30000,
        "retries": 2
    }
}