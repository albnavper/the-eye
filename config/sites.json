{
    "sites": [
        {
            "id": "dos-hermanas-bomberos",
            "name": "Dos Hermanas Bomberos",
            "url": "https://www.doshermanas.es/concejalias/relaciones-humanas/oposiciones/15-PLAZAS-DE-BOMBERO-A-CONDUCTOR-A-TURNO-LIBRE-MEDIANTE-CONCURSO-OPOSICION/",
            "enabled": true,
            "steps": [],
            "extraction": {
                "listSelector": ".galleries a[href*='.pdf']",
                "fields": {
                    "title": {
                        "selector": ".",
                        "attribute": null
                    },
                    "url": {
                        "selector": ".",
                        "attribute": "href"
                    }
                },
                "deepSearch": {
                    "enabled": false,
                    "selector": "",
                    "attribute": "href"
                }
            },
            "timeout": 30000,
            "retries": 2
        },
        {
            "id": "cbpc-tablon",
            "name": "CBPC Tablón de Anuncios",
            "url": "https://sede.cbpc.es/opencms/opencms/sede",
            "enabled": true,
            "steps": [
                {
                    "action": "evaluate",
                    "script": "const link = document.querySelector(\"a[title='Tablón de anuncios']\"); if(link) { link.removeAttribute('target'); link.click(); }"
                },
                {
                    "action": "wait",
                    "value": 3000
                },
                {
                    "action": "wait_ajax"
                },
                {
                    "action": "wait",
                    "value": 5000
                }
            ],
            "extraction": {
                "listSelector": "a[title='Ver']",
                "fields": {
                    "title": {
                        "selector": ".",
                        "attribute": "title"
                    },
                    "url": {
                        "selector": ".",
                        "attribute": "href"
                    }
                },
                "deepSearch": {
                    "enabled": true,
                    "selector": "a[title='Descargar']",
                    "attribute": "href"
                }
            },
            "timeout": 30000,
            "retries": 2
        },
        {
            "id": "dipusevilla-bomberos",
            "name": "Diputación Sevilla - Bomberos '19",
            "url": "https://sedeelectronicadipusevilla.es/opencms/opencms/sede",
            "enabled": true,
            "steps": [
                {
                    "action": "wait",
                    "value": 3000
                },
                {
                    "action": "evaluate",
                    "script": "const cb = document.querySelector('#checkAviso'); if(cb) cb.click();"
                },
                {
                    "action": "wait",
                    "value": 500
                },
                {
                    "action": "evaluate",
                    "script": "const btn = document.querySelector('a.cerrar'); if(btn) btn.click();"
                },
                {
                    "action": "wait",
                    "value": 1000
                },
                {
                    "action": "click",
                    "selector": "#search-box"
                },
                {
                    "action": "type",
                    "selector": "#search-box",
                    "value": "bombero"
                },
                {
                    "action": "press",
                    "key": "Enter"
                },
                {
                    "action": "wait_ajax"
                },
                {
                    "action": "wait",
                    "value": 3000
                },
                {
                    "action": "evaluate",
                    "script": "const links = document.querySelectorAll('a'); for(let a of links) { if(a.textContent.includes('BOMBERO') && a.textContent.includes('19') && !a.textContent.includes('2020')) { a.click(); break; } }"
                },
                {
                    "action": "wait_ajax"
                },
                {
                    "action": "wait",
                    "value": 5000
                },
                {
                    "action": "waitForSelector",
                    "selector": "div.tramites",
                    "timeout": 15000
                }
            ],
            "extraction": {
                "listSelector": "div.tramites a[href*='.pdf']",
                "fields": {
                    "title": {
                        "selector": ".",
                        "attribute": null
                    },
                    "url": {
                        "selector": ".",
                        "attribute": "href"
                    }
                },
                "deepSearch": {
                    "enabled": false,
                    "selector": "",
                    "attribute": "href"
                }
            },
            "timeout": 45000,
            "retries": 2
        },
        {
            "id": "dipusevilla-bomberos-2020",
            "name": "Diputación Sevilla - Bomberos 2020/2021",
            "url": "https://sedeelectronicadipusevilla.es/opencms/opencms/sede",
            "enabled": true,
            "steps": [
                {
                    "action": "wait",
                    "value": 3000
                },
                {
                    "action": "evaluate",
                    "script": "const cb = document.querySelector('#checkAviso'); if(cb) cb.click();"
                },
                {
                    "action": "wait",
                    "value": 500
                },
                {
                    "action": "evaluate",
                    "script": "const btn = document.querySelector('a.cerrar'); if(btn) btn.click();"
                },
                {
                    "action": "wait",
                    "value": 1000
                },
                {
                    "action": "click",
                    "selector": "#search-box"
                },
                {
                    "action": "type",
                    "selector": "#search-box",
                    "value": "bombero"
                },
                {
                    "action": "press",
                    "key": "Enter"
                },
                {
                    "action": "wait_ajax"
                },
                {
                    "action": "wait",
                    "value": 3000
                },
                {
                    "action": "evaluate",
                    "script": "const links = document.querySelectorAll('a'); for(let a of links) { if(a.textContent.includes('OEP') && a.textContent.includes('2020') && a.textContent.includes('2021')) { a.click(); break; } }"
                },
                {
                    "action": "wait_ajax"
                },
                {
                    "action": "wait",
                    "value": 5000
                },
                {
                    "action": "waitForSelector",
                    "selector": "div.tramites",
                    "timeout": 15000
                }
            ],
            "extraction": {
                "listSelector": "div.tramites a[href*='.pdf']",
                "fields": {
                    "title": {
                        "selector": ".",
                        "attribute": null
                    },
                    "url": {
                        "selector": ".",
                        "attribute": "href"
                    }
                },
                "deepSearch": {
                    "enabled": false,
                    "selector": "",
                    "attribute": "href"
                }
            },
            "timeout": 45000,
            "retries": 2
        },
        {
            "id": "moron-bomberos",
            "name": "Morón de la Frontera - Bomberos",
            "url": "https://morondelafrontera.sedelectronica.es/board",
            "enabled": true,
            "steps": [
                {
                    "action": "wait",
                    "value": 2000
                },
                {
                    "action": "fill",
                    "selector": "input.field.c-field__input",
                    "value": "bombero"
                },
                {
                    "action": "click",
                    "selector": "button.c-button.c-button-b"
                },
                {
                    "action": "wait_ajax"
                },
                {
                    "action": "wait",
                    "value": 2000
                }
            ],
            "extraction": {
                "listSelector": "a.gIconLink",
                "fields": {
                    "title": {
                        "selector": ".",
                        "attribute": "title"
                    },
                    "url": {
                        "selector": ".",
                        "attribute": "href"
                    }
                },
                "deepSearch": {
                    "enabled": false,
                    "selector": "",
                    "attribute": "href"
                }
            },
            "timeout": 30000,
            "retries": 2
        },
        {
            "id": "cbpc-licitaciones",
            "name": "CBPC - Licitaciones",
            "url": "https://contrataciondelestado.es/wps/portal/plataforma/buscadores",
            "enabled": true,
            "steps": [
                {
                    "action": "wait",
                    "value": 3000
                },
                {
                    "action": "evaluate",
                    "script": "document.getElementById('viewns_Z7_AVEQAI930OBRD02JPMTPG21004_:form1:linkFormularioBusqueda').click();"
                },
                {
                    "action": "wait",
                    "value": 2000
                },
                {
                    "action": "evaluate",
                    "script": "const input = document.getElementById('viewns_Z7_AVEQAI930OBRD02JPMTPG21004_:form1:texoorganoMAQ'); if(input) { input.value = 'Presidencia del Consorcio de Bomberos de la Provincia de Cádiz'; }"
                },
                {
                    "action": "evaluate",
                    "script": "document.getElementById('viewns_Z7_AVEQAI930OBRD02JPMTPG21004_:form1:button1Arriba').click();"
                },
                {
                    "action": "wait",
                    "value": 20000
                },
                {
                    "action": "wait_ajax"
                },
                {
                    "action": "wait",
                    "value": 5000
                }
            ],
            "extraction": {
                "listSelector": "a[id*='enlaceExpediente']",
                "fields": {
                    "title": {
                        "selector": ".",
                        "attribute": null
                    },
                    "url": {
                        "selector": ".",
                        "attribute": "href"
                    }
                },
                "deepSearch": {
                    "enabled": false,
                    "selector": "",
                    "attribute": "href"
                }
            },
            "timeout": 60000,
            "retries": 2
        },
        {
            "id": "cbpc-contratos-menores",
            "name": "CBPC - Contratos Menores",
            "url": "https://contrataciondelestado.es/wps/portal/plataforma/buscadores",
            "enabled": true,
            "steps": [
                {
                    "action": "wait",
                    "value": 3000
                },
                {
                    "action": "evaluate",
                    "script": "document.getElementById('viewns_Z7_AVEQAI930OBRD02JPMTPG21004_:form1:linkFormularioBusquedaContratosMenores').click();"
                },
                {
                    "action": "wait",
                    "value": 2000
                },
                {
                    "action": "evaluate",
                    "script": "const input = document.getElementById('viewns_Z7_AVEQAI930OBRD02JPMTPG21004_:form1:texoorganoMAQ'); if(input) { input.value = 'Presidencia del Consorcio de Bomberos de la Provincia de Cádiz'; }"
                },
                {
                    "action": "evaluate",
                    "script": "document.getElementById('viewns_Z7_AVEQAI930OBRD02JPMTPG21004_:form1:button1Arriba').click();"
                },
                {
                    "action": "wait",
                    "value": 20000
                },
                {
                    "action": "wait_ajax"
                },
                {
                    "action": "wait",
                    "value": 5000
                }
            ],
            "extraction": {
                "listSelector": "a[id*='enlaceExpediente']",
                "fields": {
                    "title": {
                        "selector": ".",
                        "attribute": null
                    },
                    "url": {
                        "selector": ".",
                        "attribute": "href"
                    }
                },
                "deepSearch": {
                    "enabled": false,
                    "selector": "",
                    "attribute": "href"
                }
            },
            "timeout": 60000,
            "retries": 2
        },
        {
            "id": "eprinsa-bomberos-33",
            "name": "EPRINSA - 33 plazas Bombero-Conductor C2",
            "url": "https://empleo.eprinsa.es/consorcioincendios/empleo?estado=2&pagina=1",
            "enabled": true,
            "steps": [
                {
                    "action": "wait",
                    "value": 3000
                },
                {
                    "action": "click",
                    "selector": "a#collapse-oferta-22978557"
                },
                {
                    "action": "wait",
                    "value": 2000
                },
                {
                    "action": "click",
                    "selector": "a[data-target='#noticeCollapse22978557']"
                },
                {
                    "action": "wait",
                    "value": 2000
                }
            ],
            "extraction": {
                "listSelector": "#noticeCollapse22978557 wec-download-file",
                "fields": {
                    "title": {
                        "selector": ".",
                        "attribute": "description-document"
                    },
                    "url": {
                        "selector": ".",
                        "property": "url"
                    }
                },
                "deepSearch": {
                    "enabled": false,
                    "selector": "",
                    "attribute": "href"
                }
            },
            "timeout": 30000,
            "retries": 2
        },
        {
            "id": "famp-cursos",
            "name": "FAMP - Próximos Cursos",
            "url": "https://administracion.famp.es/",
            "enabled": true,
            "steps": [
                {
                    "action": "wait",
                    "value": 3000
                },
                {
                    "action": "waitForSelector",
                    "selector": "#tabs-1 li.agendaitem",
                    "timeout": 15000
                }
            ],
            "extraction": {
                "listSelector": "#tabs-1 li.agendaitem",
                "fields": {
                    "title": {
                        "selector": ".agendatitulo a",
                        "attribute": null
                    },
                    "url": {
                        "selector": ".agendatitulo a",
                        "attribute": "href"
                    },
                    "date": {
                        "selector": "p.agendafechas",
                        "attribute": null,
                        "optional": true
                    }
                },
                "deepSearch": {
                    "enabled": false,
                    "selector": "",
                    "attribute": "href"
                }
            },
            "timeout": 30000,
            "retries": 2
        },
        {
            "id": "escuela-pc-cursos",
            "name": "Escuela Protección Civil - Cursos Remotos",
            "url": "https://escuela.proteccioncivil.es/gesProtCivil/public-site/inicio",
            "enabled": true,
            "steps": [
                {
                    "action": "wait",
                    "value": 2000
                },
                {
                    "action": "authenticate",
                    "userSelector": "input[placeholder='Usuario']",
                    "passSelector": "input[placeholder='Contraseña']",
                    "submitSelector": "button.btn-primary",
                    "user": "${ESCUELA_PC_USER}",
                    "pass": "${ESCUELA_PC_PASS}"
                },
                {
                    "action": "wait",
                    "value": 4000
                },
                {
                    "action": "wait_ajax"
                },
                {
                    "action": "waitForSelector",
                    "selector": "table#editions",
                    "timeout": 15000,
                    "optional": true
                }
            ],
            "extraction": {
                "listSelector": "table#editions tbody tr",
                "fields": {
                    "title": {
                        "selector": "td:nth-child(3)",
                        "attribute": null
                    },
                    "location": {
                        "selector": "td:nth-child(4)",
                        "attribute": null,
                        "optional": true
                    },
                    "startDate": {
                        "selector": "td:nth-child(5)",
                        "attribute": null,
                        "optional": true
                    },
                    "url": {
                        "selector": "td:nth-child(3)",
                        "attribute": null
                    }
                },
                "filterPatterns": {
                    "field": "location",
                    "patterns": [
                        "virtual",
                        "online",
                        "remoto",
                        "campus",
                        "distancia",
                        "telemático",
                        "telematico"
                    ],
                    "mode": "include"
                },
                "deepSearch": {
                    "enabled": false,
                    "selector": "",
                    "attribute": "href"
                }
            },
            "timeout": 45000,
            "retries": 2
        },
        {
            "id": "iespa-cursos",
            "name": "IESPA - Cursos Policía Local Andalucía",
            "url": "https://www.juntadeandalucia.es/organismos/ema/areas/formacion/iespa/paginas/curso-plataformas.html",
            "enabled": true,
            "steps": [
                {
                    "action": "wait",
                    "value": 2000
                },
                {
                    "action": "waitForSelector",
                    "selector": ".field--name-field-contenido",
                    "timeout": 15000
                }
            ],
            "extraction": {
                "listSelector": ".field--name-field-contenido a.file--mime-application-pdf",
                "fields": {
                    "title": {
                        "selector": ".",
                        "attribute": null
                    },
                    "url": {
                        "selector": ".",
                        "attribute": "href"
                    }
                },
                "deepSearch": {
                    "enabled": false,
                    "selector": "",
                    "attribute": "href"
                }
            },
            "timeout": 30000,
            "retries": 2
        },
        {
            "id": "imfe-cursos",
            "name": "IMFE Málaga - Cursos No Presenciales",
            "url": "https://imfe.malaga.eu/proximos-cursos/",
            "enabled": true,
            "steps": [
                {
                    "action": "wait",
                    "value": 2000
                },
                {
                    "action": "waitForSelector",
                    "selector": "table.table tbody tr",
                    "timeout": 15000
                }
            ],
            "extraction": {
                "listSelector": "table.table tbody tr",
                "fields": {
                    "title": {
                        "selector": "td:nth-child(2) a",
                        "attribute": null
                    },
                    "url": {
                        "selector": "td:nth-child(2) a",
                        "attribute": "href"
                    },
                    "modality": {
                        "selector": "td:nth-child(4)",
                        "attribute": null,
                        "optional": true
                    },
                    "date": {
                        "selector": "td:nth-child(6)",
                        "attribute": null,
                        "optional": true
                    }
                },
                "filterPatterns": {
                    "field": "modality",
                    "patterns": [
                        "presencial"
                    ],
                    "mode": "exclude"
                },
                "deepSearch": {
                    "enabled": false,
                    "selector": "",
                    "attribute": "href"
                }
            },
            "timeout": 30000,
            "retries": 2
        }
    ],
    "defaults": {
        "timeout": 30000,
        "retries": 2
    }
}